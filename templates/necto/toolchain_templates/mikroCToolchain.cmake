%SDK_VARIABLE_VALUES%

set(COMPILER_FLAGS %COMPILER_FLAG_VALUES% "-DBG")
set(LINKER_FLAGS %LINKER_FLAG_VALUES% "-DBG")

string(TOLOWER ${CMAKE_BUILD_TYPE} build_type)

## TODO - quick fix - remove with new NECTO release
set(DEBUG_SUPPORTED 1)
if(${MCU_NAME} MATCHES "^PIC1.+")
    set(DEBUG_SUPPORTED 0)
    if(${MCU_NAME} MATCHES "^PIC10F320$|^PIC10F322$|^PIC10LF320$|^PIC10LF322$|^PIC12F1501$|^PIC12F1571$|^PIC12F1572$|^PIC12F1612$|^PIC12LF1501$|^PIC12LF1571$|^PIC12LF1572$|^PIC12LF1612$|^PIC16F1454$|^PIC16F1455$|^PIC16F1459$|^PIC16F1503$|^PIC16F1507$|^PIC16F1508$|^PIC16F1509$|^PIC16F15313$|^PIC16F15323$|^PIC16F15324$|^PIC16F15325$|^PIC16F15344$|^PIC16F15345$|^PIC16F15354$|^PIC16F15355$|^PIC16F15356$|^PIC16F15375$|^PIC16F15376$|^PIC16F15385$|^PIC16F15386$|^PIC16F1574$|^PIC16F1575$|^PIC16F1578$|^PIC16F1579$|^PIC16F1613$|^PIC16F1614$|^PIC16F1615$|^PIC16F1618$|^PIC16F1619$|^PIC16F1703$|^PIC16F1704$|^PIC16F1705$|^PIC16F1707$|^PIC16F1708$|^PIC16F1709$|^PIC16F1713$|^PIC16F1716$|^PIC16F1717$|^PIC16F1718$|^PIC16F1719$|^PIC16F1764$|^PIC16F1765$|^PIC16F1768$|^PIC16F1769$|^PIC16F1773$|^PIC16F1776$|^PIC16F1777$|^PIC16F1778$|^PIC16F1779$|^PIC16F1788$|^PIC16F1789$|^PIC16F18313$|^PIC16F18323$|^PIC16F18324$|^PIC16F18325$|^PIC16F18326$|^PIC16F18344$|^PIC16F18345$|^PIC16F18346$|^PIC16F18426$|^PIC16F18446$|^PIC16F18854$|^PIC16F18855$|^PIC16F18856$|^PIC16F18857$|^PIC16F18875$|^PIC16F18876$|^PIC16F18877$|^PIC16F19155$|^PIC16F19156$|^PIC16F19175$|^PIC16F19176$|^PIC16F882$|^PIC16F883$|^PIC16F884$|^PIC16F886$|^PIC16F887$|^PIC16LF1454$|^PIC16LF1455$|^PIC16LF1459$|^PIC16LF1503$|^PIC16LF1507$|^PIC16LF1508$|^PIC16LF1509$|^PIC16LF15313$|^PIC16LF15323$|^PIC16LF15324$|^PIC16LF15325$|^PIC16LF15344$|^PIC16LF15345$|^PIC16LF15354$|^PIC16LF15355$|^PIC16LF15356$|^PIC16LF15375$|^PIC16LF15376$|^PIC16LF15385$|^PIC16LF15386$|^PIC16LF1574$|^PIC16LF1575$|^PIC16LF1578$|^PIC16LF1579$|^PIC16LF1613$|^PIC16LF1614$|^PIC16LF1615$|^PIC16LF1618$|^PIC16LF1619$|^PIC16LF1703$|^PIC16LF1704$|^PIC16LF1705$|^PIC16LF1707$|^PIC16LF1708$|^PIC16LF1709$|^PIC16LF1713$|^PIC16LF1716$|^PIC16LF1717$|^PIC16LF1718$|^PIC16LF1719$|^PIC16LF1764$|^PIC16LF1765$|^PIC16LF1768$|^PIC16LF1769$|^PIC16LF1773$|^PIC16LF1776$|^PIC16LF1777$|^PIC16LF1778$|^PIC16LF1779$|^PIC16LF1788$|^PIC16LF1789$|^PIC16LF18313$|^PIC16LF18323$|^PIC16LF18324$|^PIC16LF18325$|^PIC16LF18326$|^PIC16LF18344$|^PIC16LF18345$|^PIC16LF18346$|^PIC16LF18426$|^PIC16LF18446$|^PIC16LF18854$|^PIC16LF18855$|^PIC16LF18856$|^PIC16LF18857$|^PIC16LF18875$|^PIC16LF18876$|^PIC16LF18877$|^PIC16LF19155$|^PIC16LF19156$|^PIC16LF19175$|^PIC16LF19176$|^PIC18F13K50$|^PIC18F14K50$|^PIC18F2221$|^PIC18F2321$|^PIC18F23K20$|^PIC18F23K22$|^PIC18F2410$|^PIC18F2420$|^PIC18F2423$|^PIC18F2450$|^PIC18F2455$|^PIC18F2458$|^PIC18F2480$|^PIC18F24K20$|^PIC18F24K22$|^PIC18F24K40$|^PIC18F24K42$|^PIC18F24K50$|^PIC18F24Q10$|^PIC18F2510$|^PIC18F2515$|^PIC18F2520$|^PIC18F2523$|^PIC18F2525$|^PIC18F2550$|^PIC18F2553$|^PIC18F2580$|^PIC18F2585$|^PIC18F25K20$|^PIC18F25K22$|^PIC18F25K40$|^PIC18F25K42$|^PIC18F25K50$|^PIC18F25K80$|^PIC18F25Q10$|^PIC18F25Q43$|^PIC18F2610$|^PIC18F2620$|^PIC18F2680$|^PIC18F2682$|^PIC18F2685$|^PIC18F26J53$|^PIC18F26K20$|^PIC18F26K22$|^PIC18F26K40$|^PIC18F26K42$|^PIC18F26K80$|^PIC18F26Q10$|^PIC18F26Q43$|^PIC18F26Q83$|^PIC18F26Q84$|^PIC18F27J53$|^PIC18F27K40$|^PIC18F27K42$|^PIC18F27Q10$|^PIC18F27Q43$|^PIC18F27Q83$|^PIC18F27Q84$|^PIC18F4221$|^PIC18F4321$|^PIC18F43K20$|^PIC18F43K22$|^PIC18F4410$|^PIC18F4420$|^PIC18F4423$|^PIC18F4450$|^PIC18F4455$|^PIC18F4458$|^PIC18F4480$|^PIC18F44K20$|^PIC18F44K22$|^PIC18F4510$|^PIC18F4515$|^PIC18F4520$|^PIC18F4523$|^PIC18F4525$|^PIC18F4550$|^PIC18F4553$|^PIC18F4580$|^PIC18F4585$|^PIC18F45K20$|^PIC18F45K22$|^PIC18F45K40$|^PIC18F45K42$|^PIC18F45K50$|^PIC18F45K80$|^PIC18F45Q10$|^PIC18F45Q43$|^PIC18F4610$|^PIC18F4620$|^PIC18F4680$|^PIC18F4682$|^PIC18F4685$|^PIC18F46J53$|^PIC18F46K20$|^PIC18F46K22$|^PIC18F46K40$|^PIC18F46K42$|^PIC18F46K80$|^PIC18F46Q10$|^PIC18F46Q43$|^PIC18F46Q83$|^PIC18F46Q84$|^PIC18F47J53$|^PIC18F47K40$|^PIC18F47K42$|^PIC18F47Q10$|^PIC18F47Q43$|^PIC18F47Q83$|^PIC18F47Q84$|^PIC18F55K42$|^PIC18F55Q43$|^PIC18F56K42$|^PIC18F56Q43$|^PIC18F56Q83$|^PIC18F56Q84$|^PIC18F57K42$|^PIC18F57Q43$|^PIC18F57Q83$|^PIC18F57Q84$|^PIC18F63J11$|^PIC18F63J90$|^PIC18F64J11$|^PIC18F64J90$|^PIC18F65J10$|^PIC18F65J11$|^PIC18F65J15$|^PIC18F65J50$|^PIC18F65J90$|^PIC18F65J94$|^PIC18F65K22$|^PIC18F65K40$|^PIC18F65K90$|^PIC18F66J10$|^PIC18F66J11$|^PIC18F66J15$|^PIC18F66J16$|^PIC18F66J50$|^PIC18F66J55$|^PIC18F66J60$|^PIC18F66J65$|^PIC18F66J90$|^PIC18F66J93$|^PIC18F66J94$|^PIC18F66J99$|^PIC18F66K22$|^PIC18F66K40$|^PIC18F66K90$|^PIC18F67J10$|^PIC18F67J11$|^PIC18F67J50$|^PIC18F67J60$|^PIC18F67J90$|^PIC18F67J93$|^PIC18F67J94$|^PIC18F67K22$|^PIC18F67K40$|^PIC18F67K90$|^PIC18F83J11$|^PIC18F83J90$|^PIC18F84J11$|^PIC18F84J90$|^PIC18F85J10$|^PIC18F85J11$|^PIC18F85J15$|^PIC18F85J50$|^PIC18F85J90$|^PIC18F85J94$|^PIC18F85K22$|^PIC18F85K90$|^PIC18F86J10$|^PIC18F86J11$|^PIC18F86J15$|^PIC18F86J16$|^PIC18F86J50$|^PIC18F86J55$|^PIC18F86J60$|^PIC18F86J65$|^PIC18F86J72$|^PIC18F86J90$|^PIC18F86J93$|^PIC18F86J94$|^PIC18F86J99$|^PIC18F86K22$|^PIC18F86K90$|^PIC18F87J10$|^PIC18F87J11$|^PIC18F87J50$|^PIC18F87J60$|^PIC18F87J72$|^PIC18F87J90$|^PIC18F87J93$|^PIC18F87J94$|^PIC18F87K22$|^PIC18F87K90$|^PIC18F95J94$|^PIC18F96J60$|^PIC18F96J65$|^PIC18F96J94$|^PIC18F96J99$|^PIC18F97J60$|^PIC18F97J94$|^PIC18LF13K50$|^PIC18LF14K50$|^PIC18LF23K22$|^PIC18LF24K22$|^PIC18LF24K40$|^PIC18LF24K42$|^PIC18LF24K50$|^PIC18LF25K22$|^PIC18LF25K40$|^PIC18LF25K42$|^PIC18LF25K50$|^PIC18LF25K80$|^PIC18LF26J53$|^PIC18LF26K22$|^PIC18LF26K40$|^PIC18LF26K42$|^PIC18LF26K80$|^PIC18LF27J53$|^PIC18LF27K40$|^PIC18LF27K42$|^PIC18LF43K22$|^PIC18LF44K22$|^PIC18LF45K22$|^PIC18LF45K40$|^PIC18LF45K42$|^PIC18LF45K50$|^PIC18LF45K80$|^PIC18LF46J53$|^PIC18LF46K22$|^PIC18LF46K40$|^PIC18LF46K42$|^PIC18LF46K80$|^PIC18LF47J53$|^PIC18LF47K40$|^PIC18LF47K42$|^PIC18LF55K42$|^PIC18LF56K42$|^PIC18LF57K42$|^PIC18LF65K40$|^PIC18LF66K40$|^PIC18LF67K40$")
        set(DEBUG_SUPPORTED 1)
    endif()
endif()
## EOF TODO

if (DEBUG_SUPPORTED AND build_type STREQUAL "debug")
    list(APPEND COMPILER_FLAGS "-UICD")
    list(APPEND LINKER_FLAGS "-UICD")
endif()

file(TO_CMAKE_PATH "%JCFG_FILE_VALUE%" JCFG_FILE_VAL)
set(JCFG_FILE  ${JCFG_FILE_VAL} CACHE STRING "" FORCE)

file(TO_CMAKE_PATH "%CORE_LIB_VALUE%" CORE_LIB_VAL)
set(CORE_LIB ${CORE_LIB_VAL} CACHE STRING "" FORCE)

set(SEARCH_PATHS "%SEARCH_PATH_VALUES%" CACHE STRING "" FORCE)

set(CMAKE_MikroC_COMPILER "%C_COMPILER%" CACHE INTERNAL "")
set(CMAKE_MikroC_COMPILER_ID "mikroC" CACHE INTERNAL "")

set(CMAKE_MikroC_OUTPUT_EXTENSION_REPLACE 1)
set(CMAKE_MikroC_OUTPUT_EXTENSION "%OUTPUT_EXTENSION%")

# set CMAKE_SYSTEM_NAME to define build as CMAKE_CROSSCOMPILING
set(CMAKE_SYSTEM_NAME Generic)
set(CMAKE_SYSTEM_VERSION 1)

SET(CMAKE_MikroC_COMPILER_WORKS TRUE CACHE INTERNAL "")
SET(CMAKE_MikroC_COMPILER_FORCED TRUE CACHE INTERNAL "")
SET(CMAKE_MikroC_COMPILER_ID_RUN TRUE CACHE INTERNAL "")

set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)

# add compiler option flags
add_compile_options(${COMPILER_FLAGS})
message(INFO ": ${COMPILER_FLAGS}")
# add link option flags
add_link_options(${LINKER_FLAGS})

set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)

file(TO_CMAKE_PATH "%MIKROSDK_PATH%" MIKROSDK_PATH)
file(TO_CMAKE_PATH "%MIKROC_CORE_PATH%" MIKROC_CORE_PATH)


set(MIKROSDK_ROOT_PATH ${MIKROSDK_PATH})
set(MIKROC_CORE_ROOT_PATH ${MIKROC_CORE_PATH})
#append to cmake_prefix_path
list(APPEND CMAKE_PREFIX_PATH ${MIKROSDK_ROOT_PATH})
list(APPEND CMAKE_PREFIX_PATH ${MIKROC_CORE_ROOT_PATH})

list(APPEND CMAKE_MODULE_PATH %CMAKE_MODULE_PATH_VALUE%)

%SDK_SETUP_BUILD_VALUE%
