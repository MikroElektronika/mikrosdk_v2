<p align="center">
  <img src="http://www.mikroe.com/img/designs/beta/logo_small.png?raw=true" alt="MikroElektronika"/>
</p>

---

**[BACK TO MAIN FILE](../../CHANGELOG.md)**

---

# `v2.1.1`

+ released: 2021-08-24

## Changes

- [`v2.1.1`](#v211)
  - [Changes](#changes)
    - [NEW HARDWARE](#new-hardware)
    - [DEVELOPMENT KIT PACKAGE](#development-kit-package)
  - [Fixes](#fixes)
  - [Improvements](#improvements)
    - [Git relevant updates](#git-relevant-updates)
    - [Test examples](#test-examples)
    - [Recursive build automation](#recursive-build-automation)

### NEW HARDWARE

+ **[Fusion for PIC v8](https://www.mikroe.com/fusion-for-pic-v8)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[PICPLC16 v7a](https://www.mikroe.com/picplc16-v7a)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 3 for PIC Capacitive](https://www.mikroe.com/mikromedia-3-for-pic-capacitive)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 3 for PIC32MZ Capacitive](https://www.mikroe.com/mikromedia-3-for-pic32mz-capacitive)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 4 for PIC32MZ Capacitive](https://www.mikroe.com/mikromedia-4-for-pic32mz-capacitive)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 5 for PIC32MZ Capacitive](https://www.mikroe.com/mikromedia-5-for-pic32mz-capacitive)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 3 for STM32F2 Capacitive](https://www.mikroe.com/mikromedia-3-for-stm32f2-capacitive)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 3 for STM32F2 Capacitive FPI Frame](https://www.mikroe.com/mikromedia-3-for-stm32f2-capacitive-fpi-with-frame)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 3 for STM32F2 Capacitive FPI Bezel](https://www.mikroe.com/mikromedia-3-for-stm32f2-capacitive-fpi-with-bezel)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 4 for STM32F2 Capacitive FPI Frame](https://www.mikroe.com/mikromedia-4-for-stm32f2-capacitive-fpi-with-frame)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 4 for STM32F2 Capacitive FPI Bezel](https://www.mikroe.com/mikromedia-4-for-stm32f2-capacitive-fpi-with-bezel)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 5 for STM32F7 Capacitive](https://www.mikroe.com/mikromedia-5-for-stm32f7-capacitive)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 5 for STM32F7 Capacitive FPI Frame](https://www.mikroe.com/mikromedia-5-for-stm32f7-capacitive-fpi-with-frame)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[Mikromedia 5 for STM32F7 Capacitive FPI Bezel](https://www.mikroe.com/mikromedia-5-for-stm32f7-capacitive-fpi-with-bezel)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[PIC Clicker](https://www.mikroe.com/clicker-pic18fj)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[6LoWPAN Clicker](https://www.mikroe.com/clicker-6lowpan)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[STM32 M4 Clicker](https://www.mikroe.com/clicker-stm32f4)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[SIBRAIN FOR PIC32MZ1024EFK144](https://www.mikroe.com/sibrain-for-pic32mz1024efk144)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[SIBRAIN FOR PIC32MZ1024EFF144](https://www.mikroe.com/sibrain-for-pic32mz1024eff144)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[SIBRAIN FOR PIC32MZ1024EFE144](https://www.mikroe.com/sibrain-for-pic32mz1024efe144)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD 13 for STM32 STM32L162ZE](https://www.mikroe.com/mcu-card-13-for-stm32-stm32l162ze)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD 13 for STM32 STM32L151ZD](https://www.mikroe.com/mcu-card-13-for-stm32-stm32l151zd)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD 13 for STM32 STM32L152ZD](https://www.mikroe.com/mcu-card-13-for-stm32-stm32l152zd)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD for STM32 STM32F215ZG](https://www.mikroe.com/mcu-card-for-stm32-stm32f215zg)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD for STM32 STM32F405ZG](https://www.mikroe.com/mcu-card-for-stm32-stm32f405zg)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD for STM32 STM32F415ZG](https://www.mikroe.com/mcu-card-for-stm32-stm32f415zg)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD 11 for STM32 STM32F303VE](https://www.mikroe.com/mcu-card-11-for-stm32-stm32f303ve)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD for STM32 STM32F446ZE](https://www.mikroe.com/mcu-card-for-stm32-stm32f446ze)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD for STM32 STM32F746ZG](https://www.mikroe.com/mcu-card-for-stm32-stm32f746zg)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD 3 for PIC PIC18F96J65](https://www.mikroe.com/mcu-card-3-for-pic-pic18f96j65)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated
+ **[MCU CARD for PIC PIC18F96J94](https://www.mikroe.com/mcu-card-for-pic-pic18f96j94)**
  + Added adequate board definition files
  + Updated adequate manifest files
  + Configuration files updated

### DEVELOPMENT KIT PACKAGE

+ Updated mikroSDK development kit to conform to newly added hardware stated in last paragraph
  + Added all 31 new hardware definitions

## Fixes

+ Designer projects did not work for 8-bit data ports with higher nibble connections
  + e.g -> data port is PORTE pins 8:15
+ Added adequate defenders for SPI and ADC low level implementation for PIC devices
+ mikroSDK build tool description spelling fixed
+ PIC `Q10` chips I2C baud rate setting
  + Sets correct baud rates now
  + Before the fix, setting 400K would result in 100K on HW
+ I2C busy bit was always high after clock init
  + Affects `STM32F101` and `STM32F103` series of chips
  + [ERRATA](https://www.st.com/resource/en/errata_sheet/cd00273032-stm32f101xfg-and-stm32f103xfg-xldensity-device-limitations-stmicroelectronics.pdf) page `23`, paragraph `2.12.7`
+ PIC32 Logger issue
  + Sending data immediatelly after logger initialization resulted in lost data
+ STM32 M7 Uart fix
  + Sending/receiving large amounts of data resulted in register overflow
+ Missing function declaration for PIC 8-bit chips
  + `hal_ll_spi_master_hw_init` added
+ Unable to edit `ANCON3` register values for some PIC 8-bit chips if PPS Lock bit is set
+ UART general issue
  + Implemented waiting for buffers to be empty before reinitializing the module
  + UART now returns `0` if no data hs been written/read
    + Previously it returned `-1`
+ Fixed structure data access
  + Changed `->` to `.` where necessary
+ Fixed pin check result variable size
+ Fixed setting pins as digital input for 50 PIC32MX chips
  + Fixed analog maps
+ STM32LxSy chips GPIO fix
  + PORTG pins didn't work as expected
+ Designer code generation was wrong for 4 inch bezel mikromedia boards
  + Touchpanel orientation was required

## Improvements

+ Libraries are now separated per module
  + More efficient
  + Conserves memory
  + No need to include all libraries
    + Include only the one you need
+ Implemented selection per module
  + Now, if same set of pins is available on a different module, that module will be mapped
+ Implemented graphic library port mask selection
+ Designer template now depends on `memake` file and has unified code for TFT manipulation
+ SPI for PIC 8-bit chips now sets baud rate more precisely
  + Previously implemented by using hardware module dividers(2,4,8...)
+ Implemented adequate slew rate setting for PIC32 chips
  + Affects SPI module specifically
+ Removed slew rate setting for 8-bit PIC chips which don't need it
  + Code optimized further
+ SPI click board templates now include data sampling selection
  + 8-bit PIC chips
    + e.g middle,end...
+ SPI initial SCK line glitch on PIC32 chips fixed
+ Unified unused register naming in all low level sources
+ Removed excess verifications
  + Excess `NULL` pointer check
  + Excess `pin name` checks
+ Shared registers for some PIC 8-bit chips
  + Implemented for following chips
    + `PIC18F65J50`
    + `PIC18F66J50`
    + `PIC18F66J55`
    + `PIC18F67J50`
    + `PIC18F85J50`
    + `PIC18F86J50`
    + `PIC18F86J55`
    + `PIC18F87J50`
+ Added nibble control macros for all architectures
  + See following files for more details:
    + [ARM](./targets/arm/mikroe/common/include/hal_ll_bit_control.h)
    + [PIC32](./targets/pic_32bit/mikroe/common/include/hal_ll_bit_control.h)
    + [PIC18](./targets/pic_8bit/mikroe/common/include/hal_ll_bit_control.h)
+ Added mikromedia support for PIC 32-bit chips
+ Added mikromedia support for PIC 8-bit chips

### Git relevant updates

+ Added following files:
  + List of [Requirements](./REQUIREMENTS.md)
  + List of all supported chips; click [HERE](./SUPPORTED_CHIP_LIST.md) for the list
+ Added workflows ( CI/CD ):
  + Automated response to issue creation
  + Automated response to first contribution

### Test examples

*Added following test examples:*

+ `adc`
  + Outputs AD conversion result on diodes or UART terminal
+ `clicker_buttons`
  + Defined test for MikroE&trade; clicker boards
+ `gpio`
  + Tests all GPIO functions
+ `i2c`
  + Tests all I2C functions
+ `mikrobus`
  + Tests all MikroE&trade; development board MikroBUS&trade; connections
+ `pwm`
  + Tests all PWM/TIM functions
+ `spi`
  + Tests all SPI functions
+ `tft_jig`
  + Test all TFT panel connections
+ `tft_touch_panel`
  + Tests TFT Touch panel with basic example
+ `uart`
  + Tests all UART functions
+ `clicks`
  + Tests all modules on specifically selected click boards
    + `adc`
      + `click_ambient_7`
      + `click_force`
      + `click_hall_current_5`
      + `click_pressure_12`
      + `click_slider_2`
    + `gpio`
      + `click_4x4_rgb`
      + `click_cap_touch`
      + `click_opto_encoder_3`
      + `click_pll`
      + `click_sht1x`
      + `click_vibra_sense`
    + `i2c`
      + `click_6dof_imu_11`
      + `click_altitude_3`
      + `click_color_9`
      + `click_ecg_6`
      + `click_light_ranger_2`
    + `pwm`
      + `click_brushless`
      + `click_button_y`
      + `click_dc_motor_8`
      + `click_led_driver_6`
      + `click_stspin250`
    + `spi`
      + `click_bee`
      + `click_ccrf_2`
      + `click_eink_290_inch`
      + `click_magneto_2`
      + `click_oledc`
    + `uart`
      + `click_barcode`
      + `click_ble_8`
      + `click_fingerprint_2`
      + `click_iqrf_2`
      + `click_lte_iot_2`

All examples have a minimum memory requirement, which is handled in each `memake.txt` file
separately.

For more information, please refer to each example and a `ReadMe.txt` if existant.

### Recursive build automation

*Added powershell script for automated recursive `SDK` build.*

Files added:

+ [ReadMe.md](./scripts/ReadMe.md)
+ [build-hal-recursion-ci.ps1](./scripts/build-hal-recursion-ci.ps1)
+ [utility.ps1](./scripts/utility.ps1)
+ [customRun.bat](./scripts/customRun.bat)
+ [customRun.sh](./scripts/customRun.sh)
+ [customParams.json](./scripts/customParams.json)

For more information, please refer to main script [DESCRIPTION](./scripts/ReadMe.md)

---

**[BACK TO MAIN FILE](../../CHANGELOG.md)**

---
